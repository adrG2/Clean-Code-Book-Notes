# Funciones

## Tamaño reducido

El objetivo es hacer una función con las mínimas líneas posibles.

Un ejemplo de buen programa sería aquel en el que sus funciones:

1. Tienen 2, 3 o 4 líneas de longitud.

2. Todas ellas deben ser obvias.

3. Todas deben contar una historia y cada una lleva a la siguiente en un orden atractivo.

## Bloques y sangrado

El nivel de sangrado de una función no debe ser mayor de uno o dos. Esto evitaría a toda cosa estructuras anidadas que puedan aumentar el tamaño de la función.

Los bloques de instrucciones como `if`, `else` o `while` sólo deberían tener una línea con la invocación de una función.

```Java
    if(User.isValid()) {
        registerUserCartItems();
    } else {
        userNotValidException();
    }

    while(User.isNotRegistered()) {
        showSuggestionPopUpRegister();
    }
```

## Hacer una cosa

> Las funciones solo deben hacer una cosa. Deben hacerlo bien y debe ser lo único que hagan.

Ejemplo:

```Java
    public static String renderPageWithSetupsAndTeardowns(PageData pageDate, boolean isSuite) {
        if ( isTestPage( pageData ) ) {
            includeSetupAndTeardownPages(pageData, isSuite);
        }
        return pageData.getHtml();
    }
```

**¿Esta función hace una o tres cosas?**

Los tres pasos de la función se encuentran a un nivel de abstracción por debajo del nombre de la función.

Descripción de la función:

_Para `RenderPageWithSetupsAndTeardowns`, comprobamos si la página es de prueba y, en caso afirmativo, incluimos las configuraciones y los detalles. En ambos casos, la representamos en HTML_

> #### Si una función sólo realiza los pasos situados un nivel por debajo del nombre de la función, entonces hace una cosa.

**Creamos funciones para descomponer conceptos más amplios en un conjunto de pasos en el siguiente nivel de abstracción.**

Otra forma de saber que una función hace más de una cosa es **extraer otra función de la misma con un nombre que no sea una reducción de su implementación.**

Es evidente que una función hace más de una cosa cuando se divide en secciones como declaraciones, inicializaciones y filtros.

**Las funciones que hace una sola cosa no se pueden dividir en secciones.**

## Un nivel de abstracción por función

> **Las instrucciones de una función siempre se tienen que encontrar en el mismo nivel de abstracción.**

## Leer código de arriba a abajo: la regla descendente

Todas las funciones deben estar jerarquizadas de mayor a menor por nivel de abstracción.
